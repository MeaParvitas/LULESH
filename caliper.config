# [mpi-tree-report]
CALI_SERVICES_ENABLE=aggregate,event,mpi,mpireport,timestamp
CALI_EVENT_TRIGGER=annotation,function,loop,mpi.function
CALI_TIMER_SNAPSHOT_DURATION=true
CALI_TIMER_INCLUSIVE_DURATION=false
CALI_AGGREGATE_KEY=annotation,function,loop,mpi.function
CALI_MPI_WHITELIST=MPI_Allreduce,MPI_Barrier,MPI_Wait,MPI_Waitall
CALI_MPIREPORT_CONFIG="SELECT statistics(sum#time.duration) FORMAT tree"

# [mpi-tree-cali]
CALI_SERVICES_ENABLE=aggregate,event,mpi,mpireport,timestamp
CALI_EVENT_TRIGGER=annotation,function,loop,mpi.function
CALI_TIMER_SNAPSHOT_DURATION=true
CALI_TIMER_INCLUSIVE_DURATION=false
CALI_AGGREGATE_KEY=annotation,function,loop,mpi.function
CALI_MPI_WHITELIST=MPI_Allreduce,MPI_Barrier,MPI_Wait,MPI_Waitall
CALI_MPIREPORT_CONFIG="SELECT statistics(sum#time.duration) FORMAT cali"
CALI_MPIREPORT_FILENAME="lulesh_profile_x%mpi.world.size%.cali"

# [mpiP]
CALI_SERVICES_ENABLE=aggregate,event,mpi,mpireport,timestamp
CALI_EVENT_TRIGGER=mpi.function
CALI_TIMER_SNAPSHOT_DURATION=true
CALI_TIMER_INCLUSIVE_DURATION=false
CALI_AGGREGATE_KEY=mpi.function
CALI_MPI_BLACKLIST=MPI_Comm_rank,MPI_Comm_size,MPI_Initialized,MPI_Finalized,MPI_Wtime
CALI_MPIREPORT_CONFIG="SELECT mpi.function,count(),statistics(sum#time.duration),percent_total(sum#time.duration) FORMAT table ORDER BY percent_total#sum#time.duration DESC"

# [callpath-sample-report]
CALI_SERVICES_ENABLE=aggregate:callpath:pthread:report:sampler:symbollookup
CALI_CALLPATH_SKIP_FRAMES=4
CALI_SAMPLER_FREQUENCY=50
CALI_AGGREGATE_KEY=callpath.address
CALI_REPORT_CONFIG="SELECT count() GROUP BY source.function#callpath.address FORMAT tree(source.function#callpath.address)"

# [mpi-msg-trace]
CALI_SERVICES_ENABLE=event,mpi,recorder,timestamp,trace
CALI_EVENT_TRIGGER=mpi.function
CALI_TIMER_SNAPSHOT_DURATION=false
CALI_TIMER_INCLUSIVE_DURATION=true
CALI_TIMER_OFFSET=true
CALI_MPI_MSG_TRACING=true
CALI_MPI_WHITELIST=MPI_Isend,MPI_Irecv,MPI_Wait,MPI_Waitall,MPI_Allreduce,MPI_Barrier
CALI_RECORDER_FILENAME=msgtrace-%mpi.rank%.cali

# [memsampling]
CALI_LIBPFM_EVENTS=MEM_TRANS_RETIRED:LATENCY_ABOVE_THRESHOLD
CALI_LIBPFM_SAMPLE_PERIOD=5000
CALI_LIBPFM_PRECISE_IP=2
CALI_LIBPFM_CONFIG1=20
CALI_LIBPFM_SAMPLE_ATTRIBUTES=ip,time,tid,cpu,addr,weight,data_src

CALI_ALLOC_TRACK_ALLOCATIONS=false
CALI_ALLOC_RESOLVE_ADDRESSES=true
CALI_ALLOC_RECORD_ACTIVE_MEM=true

CALI_SERVICES_ENABLE=alloc,libpfm,pthread,recorder,trace,symbollookup

# [mpi-memsampling]
CALI_LIBPFM_EVENTS=MEM_TRANS_RETIRED:LATENCY_ABOVE_THRESHOLD
CALI_LIBPFM_SAMPLE_PERIOD=10000
CALI_LIBPFM_PRECISE_IP=2
CALI_LIBPFM_CONFIG1=20
CALI_LIBPFM_SAMPLE_ATTRIBUTES=ip,time,tid,cpu,addr,weight,data_src

CALI_ALLOC_TRACK_ALLOCATIONS=false
CALI_ALLOC_RESOLVE_ADDRESSES=true
CALI_ALLOC_RECORD_ACTIVE_MEM=true

CALI_SERVICES_ENABLE=alloc,libpfm,mpi,pthread,recorder,trace,symbollookup

# [flat-sample-profile]
CALI_SERVICES_ENABLE=sampler,symbollookup,report,trace
CALI_SAMPLER_FREQUENCY=100
CALI_REPORT_CONFIG="select source.function#cali.sampler.pc,count() group by source.function#cali.sampler.pc format table order by count desc"

# [callpath-event-profile]
CALI_SERVICES_ENABLE=aggregate,callpath,event,symbollookup,report
CALI_AGGREGATE_KEY=callpath.address
CALI_CALLPATH_SKIP_FRAMES=7
CALI_REPORT_CONFIG="select count() group by source.function#callpath.address format tree(source.function#callpath.address)"

# [annotation-and-sampling]
CALI_SERVICES_ENABLE=aggregate,callpath,event,sampler,symbollookup,timestamp,recorder
CALI_AGGREGATE_KEY=callpath.address,annotation,function,loop,cali.event.begin,cali.event.end
CALI_CALLPATH_SKIP_FRAMES=4
CALI_SAMPLER_FREQUENCY=100
CALI_TIMER_SNAPSHOT_DURATION=true
CALI_TIMER_INCLUSIVE_DURATION=true

# [annotation-and-sampling-trace]
CALI_SERVICES_ENABLE=callpath,event,recorder,sampler,symbollookup,timestamp,trace
CALI_CALLPATH_SKIP_FRAMES=4
CALI_SAMPLER_FREQUENCY=100
CALI_TIMER_SNAPSHOT_DURATION=true
CALI_TIMER_INCLUSIVE_DURATION=true

# [module]
CALI_SERVICES_ENABLE=aggregate:callpath:pthread:report:sampler:symbollookup
CALI_SAMPLER_FREQUENCY=50
CALI_CALLPATH_SKIP_FRAMES=4
CALI_AGGREGATE_KEY=callpath.address,cali.sampler.pc
CALI_SYMBOLLOOKUP_LOOKUP_MODULE=true
CALI_SYMBOLLOOKUP_LOOKUP_SOURCELOC=true
CALI_SYMBOLLOOKUP_LOOKUP_FUNCTIONS=false
CALI_REPORT_CONFIG="SELECT count(),sourceloc#cali.sampler.pc group by module#callpath.address,sourceloc#cali.sampler.pc format tree(module#callpath.address)"
# CALI_REPORT_CONFIG="SELECT count() GROUP BY source.module#callpath.address FORMAT tree(source.module#callpath.address)"
